<header class="header-bg text-light py-4">
  <div class="container">
    <div class="d-flex justify-content-between align-items-center">
      <h1 class="text-white">
        <i class="fas fa-utensils"></i> Kutak dobre hrane
      </h1>
      <nav>
        <ul class="nav">
          <li class="nav-item">
            <a class="nav-link text-light" routerLink="/profil">Profil</a>
          </li>
          <li class="nav-item">
            <a class="nav-link text-light" routerLink="/rezervacije">Rezervacije</a>
          </li>
          <li class="nav-item">
            <a class="nav-link text-light" routerLink="/porudzbine">Dostava</a>
          </li>
          <li class="nav-item">
            <a class="nav-link text-light" routerLink="/statistika">Statistika</a>
          </li>
        </ul>
      </nav>
    </div>
  </div>
</header>

<div class="main-bg container my-5">
  <h2 class="text-center mb-4 text-primary">Pending narudžbine</h2>
  <hr />
  <div class="p-4 rounded shadow-sm border-primary">
    <div *ngFor="let order of orders" class="order mb-4 p-3 border rounded">
      <p><strong>Customer:</strong> {{ order.customer }}</p>
      <p><strong>Status:</strong> {{ order.status }}</p>
      <div>
        <p><strong>Items:</strong></p>
        <ul>
          <li *ngFor="let item of order.items">
            {{ item.quantity }} x {{ item.name }}
          </li>
        </ul>
      </div>
      <button class="btn btn-success btn-sm me-2" (click)="openModal(order)">Potvrdi</button>
      <button class="btn btn-danger btn-sm" (click)="rejectOrder(order)">Odbij</button>
    </div>
    <div *ngIf="orders.length == 0">
      <p>Nema pending narudzbina.</p>
    </div>
  </div>
</div>

<div class="main-bg container my-5">
  <h2 class="text-center mb-4 text-primary">Confirmed narudžbine</h2>
  <hr />
  <div class="p-4 rounded shadow-sm border-primary">
    <div *ngFor="let order of confirmedOrders" class="order mb-4 p-3 border rounded">
      <p><strong>Customer:</strong> {{ order.customer }}</p>
      <p><strong>Status:</strong> {{ order.status }}</p>
      <div>
        <p><strong>Items:</strong></p>
        <ul>
          <li *ngFor="let item of order.items">
            {{ item.quantity }} x {{ item.name }}
          </li>
        </ul>
      </div>
      <p><strong>Estimated Delivery Time:</strong> {{ order.estimatedDeliveryTime }}</p>
    </div>
    <div *ngIf="confirmedOrders.length == 0">
      <p>Nema confirmed narudzbina.</p>
    </div>
  </div>
</div>

<div class="main-bg container my-5">
  <h2 class="text-center mb-4 text-primary">Rejected narudžbine</h2>
  <hr />
  <div class="p-4 rounded shadow-sm border-primary">
    <div *ngFor="let order of rejectedOrders" class="order mb-4 p-3 border rounded">
      <p><strong>Customer:</strong> {{ order.customer }}</p>
      <p><strong>Status:</strong> {{ order.status }}</p>
      <div>
        <p><strong>Items:</strong></p>
        <ul>
          <li *ngFor="let item of order.items">
            {{ item.quantity }} x {{ item.name }}
          </li>
        </ul>
      </div>
    </div>
    <div *ngIf="rejectedOrders.length == 0">
      <p>Nema rejected narudzbina.</p>
    </div>
  </div>
</div>

<!-- Modal -->
<div class="modal" tabindex="-1" [ngClass]="{'show': isModalOpen}" [ngStyle]="{'display': isModalOpen ? 'block' : 'none'}">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Odaberite procenjeno vreme dostave</h5>
        <button type="button" class="btn-close" (click)="closeModal()" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <select [(ngModel)]="selectedDeliveryTime" class="form-select">
          <option value="20-30 minutes">20-30 minutes</option>
          <option value="30-40 minutes">30-40 minutes</option>
          <option value="50-60 minutes">50-60 minutes</option>
        </select>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" (click)="closeModal()">Close</button>
        <button type="button" class="btn btn-primary" [disabled]="!selectedOrder || !selectedDeliveryTime" (click)="confirmOrder(selectedOrder, selectedDeliveryTime)">Potvrdi</button>
      </div>
    </div>
  </div>
</div>

<footer class="footer-bg text-light py-3 mt-5">
  <div class="container text-center">
    <hr class="bg-warning mb-4">
    <p>&copy; {{ currentYear }} Kutak dobre hrane. All rights reserved.</p>
  </div>
</footer>